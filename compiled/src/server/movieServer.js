'use strict';

var express = require('express');
var mysql = require('mysql');
var controller = require('./dbServer.js');
var app = express();

var parser = require('body-parser');

// app.get('/', (req, res) => res.send())
app.get('/api/movies', function (req, res) {
    controller.getStoredMovies(function (err, data) {
        console.log(data, 'data at app.get');
        res.send(data);
    });
});

app.use(express.static('/Users/chris/code/movieApp/movieApp'));

var port = 8000;
app.set('port', port);

app.use(parser.json());

app.post('/', function (req, res) {
    console.log(req.body);
    controller.postUserAddedMovie(req.body);
    res.send('posted');
});

// For now, since you're running this server on your local machine,
// we'll have it listen on the IP address 127.0.0.1, which is a
// special address that always refers to localhost.
var ip = '127.0.0.1';
console.log('Listening on http://' + ip + ':' + port);

app.listen(8000);

module.exports.app = app;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9zZXJ2ZXIvbW92aWVTZXJ2ZXIuanMiXSwibmFtZXMiOlsiZXhwcmVzcyIsInJlcXVpcmUiLCJteXNxbCIsImNvbnRyb2xsZXIiLCJhcHAiLCJwYXJzZXIiLCJnZXQiLCJyZXEiLCJyZXMiLCJnZXRTdG9yZWRNb3ZpZXMiLCJlcnIiLCJkYXRhIiwiY29uc29sZSIsImxvZyIsInNlbmQiLCJ1c2UiLCJzdGF0aWMiLCJwb3J0Iiwic2V0IiwianNvbiIsInBvc3QiLCJib2R5IiwicG9zdFVzZXJBZGRlZE1vdmllIiwiaXAiLCJsaXN0ZW4iLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOztBQUFBLElBQU1BLFVBQVVDLFFBQVEsU0FBUixDQUFoQjtBQUNBLElBQUlDLFFBQVFELFFBQVEsT0FBUixDQUFaO0FBQ0EsSUFBTUUsYUFBYUYsUUFBUSxlQUFSLENBQW5CO0FBQ0EsSUFBTUcsTUFBTUosU0FBWjs7QUFFQSxJQUFJSyxTQUFTSixRQUFRLGFBQVIsQ0FBYjs7QUFFQTtBQUNBRyxJQUFJRSxHQUFKLENBQVEsYUFBUixFQUF1QixVQUFTQyxHQUFULEVBQWNDLEdBQWQsRUFBbUI7QUFDdENMLGVBQVdNLGVBQVgsQ0FBMkIsVUFBQ0MsR0FBRCxFQUFNQyxJQUFOLEVBQWU7QUFDdENDLGdCQUFRQyxHQUFSLENBQVlGLElBQVosRUFBa0IsaUJBQWxCO0FBQ0FILFlBQUlNLElBQUosQ0FBU0gsSUFBVDtBQUNILEtBSEQ7QUFJSCxDQUxEOztBQVFBUCxJQUFJVyxHQUFKLENBQVFmLFFBQVFnQixNQUFSLENBQWUscUNBQWYsQ0FBUjs7QUFFQSxJQUFJQyxPQUFPLElBQVg7QUFDQWIsSUFBSWMsR0FBSixDQUFRLE1BQVIsRUFBZ0JELElBQWhCOztBQUdBYixJQUFJVyxHQUFKLENBQVFWLE9BQU9jLElBQVAsRUFBUjs7QUFFQWYsSUFBSWdCLElBQUosQ0FBUyxHQUFULEVBQWMsVUFBU2IsR0FBVCxFQUFjQyxHQUFkLEVBQW1CO0FBQzdCSSxZQUFRQyxHQUFSLENBQVlOLElBQUljLElBQWhCO0FBQ0FsQixlQUFXbUIsa0JBQVgsQ0FBOEJmLElBQUljLElBQWxDO0FBQ0FiLFFBQUlNLElBQUosQ0FBUyxRQUFUO0FBQ0gsQ0FKRDs7QUFRQTtBQUNBO0FBQ0E7QUFDQSxJQUFJUyxLQUFLLFdBQVQ7QUFDQVgsUUFBUUMsR0FBUixDQUFZLHlCQUF5QlUsRUFBekIsR0FBOEIsR0FBOUIsR0FBb0NOLElBQWhEOztBQUVBYixJQUFJb0IsTUFBSixDQUFXLElBQVg7O0FBRUFDLE9BQU9DLE9BQVAsQ0FBZXRCLEdBQWYsR0FBcUJBLEdBQXJCIiwiZmlsZSI6Im1vdmllU2VydmVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKVxudmFyIG15c3FsID0gcmVxdWlyZSgnbXlzcWwnKTtcbmNvbnN0IGNvbnRyb2xsZXIgPSByZXF1aXJlKCcuL2RiU2VydmVyLmpzJylcbmNvbnN0IGFwcCA9IGV4cHJlc3MoKVxuXG52YXIgcGFyc2VyID0gcmVxdWlyZSgnYm9keS1wYXJzZXInKTtcblxuLy8gYXBwLmdldCgnLycsIChyZXEsIHJlcykgPT4gcmVzLnNlbmQoKSlcbmFwcC5nZXQoJy9hcGkvbW92aWVzJywgZnVuY3Rpb24ocmVxLCByZXMpIHtcbiAgICBjb250cm9sbGVyLmdldFN0b3JlZE1vdmllcygoZXJyLCBkYXRhKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGRhdGEsICdkYXRhIGF0IGFwcC5nZXQnKTtcbiAgICAgICAgcmVzLnNlbmQoZGF0YSlcbiAgICB9KVxufSk7XG5cblxuYXBwLnVzZShleHByZXNzLnN0YXRpYygnL1VzZXJzL2NocmlzL2NvZGUvbW92aWVBcHAvbW92aWVBcHAnKSk7XG5cbnZhciBwb3J0ID0gODAwMDtcbmFwcC5zZXQoJ3BvcnQnLCBwb3J0KTtcblxuXG5hcHAudXNlKHBhcnNlci5qc29uKCkpO1xuXG5hcHAucG9zdCgnLycsIGZ1bmN0aW9uKHJlcSwgcmVzKSB7XG4gICAgY29uc29sZS5sb2cocmVxLmJvZHkpO1xuICAgIGNvbnRyb2xsZXIucG9zdFVzZXJBZGRlZE1vdmllKHJlcS5ib2R5KTtcbiAgICByZXMuc2VuZCgncG9zdGVkJyk7XG59KTtcblxuXG5cbi8vIEZvciBub3csIHNpbmNlIHlvdSdyZSBydW5uaW5nIHRoaXMgc2VydmVyIG9uIHlvdXIgbG9jYWwgbWFjaGluZSxcbi8vIHdlJ2xsIGhhdmUgaXQgbGlzdGVuIG9uIHRoZSBJUCBhZGRyZXNzIDEyNy4wLjAuMSwgd2hpY2ggaXMgYVxuLy8gc3BlY2lhbCBhZGRyZXNzIHRoYXQgYWx3YXlzIHJlZmVycyB0byBsb2NhbGhvc3QuXG52YXIgaXAgPSAnMTI3LjAuMC4xJztcbmNvbnNvbGUubG9nKCdMaXN0ZW5pbmcgb24gaHR0cDovLycgKyBpcCArICc6JyArIHBvcnQpO1xuXG5hcHAubGlzdGVuKDgwMDApXG5cbm1vZHVsZS5leHBvcnRzLmFwcCA9IGFwcDtcblxuXG4iXX0=